\documentclass[../../thesis.tex]{subfiles}


\begin{document}
\begin{figure}[ht]
    \centering
    \pgfdeclarelayer{bg}    % declare background layer
    \pgfdeclarelayer{bbg}    % declare backbackground layer
    \pgfsetlayers{bbg,bg,main}  % set the order of the layers (main is the standard layer)
    \tikzsetnextfilename{laser_transmission_setup}
    \begin{tikzpicture}
      \fill[gray!20] (6,0) rectangle (7,-1);
      \draw (6.5,-.5) circle (1cm);
      \node at (6.5,-2) {Cell with membrane};
      \draw (2,-1) rectangle (-1,0);
      \node at (.5,-.5) {\ce{HeNe} Laser};
      \node at (13,-.5) {Photodiode};
      \draw (3,-1)--(3,0) node[anchor=south] {Collimator};
      \draw (4,0)--(4,-0.4);
      \draw (4,-0.6)--(4,-1) node[anchor=north] {Diaphragm};
      \draw (9,-.4)--(9,0);
      \draw (9,-.6)--(9,-1) node[anchor=north] {Diaphragm};
      \draw (10,-1)--(10,0) node[anchor=south] {Collecting lense};
      \draw (11,0) rectangle (12,-1);
      \begin{pgfonlayer}{bg}
        \draw[line width=1mm, color=red] (2,-.5)--(4,-.5);
        \draw[line width=0.5mm, color=red] (4,-.5)--(5,-.5);
      \end{pgfonlayer}
      \draw[line width=.5mm, color=red] (5,-.5)--(6,-.5);
      \begin{pgfonlayer}{bbg}
        \draw[line width=1mm, color=red] (7,-.5)--(9,-.5);
        \draw[line width=0.5mm, color=red] (9,-.5)--(11,-.5);
      \end{pgfonlayer}
      \node at (6.5,-.5) {$T_\mathrm{cell}$};
    \end{tikzpicture}
    \caption{Sketch of the laser transmission setup.}
    \label{fig:laser_transmission_setup}
\end{figure}
\end{document}
