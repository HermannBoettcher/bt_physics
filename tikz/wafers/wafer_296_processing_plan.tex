\documentclass[../../thesis.tex]{subfiles}

\begin{document}

\begin{figure}[ht]
    \centering
    \pgfdeclarelayer{bg}    % declare background layer
    \pgfsetlayers{bg,main}  % set the order of the layers (main is the standard layer)
    \tikzsetnextfilename{wafer_296_processing_plan}
    \begin{tikzpicture}
        \fill[rectangle,yellow!50] (0,0) rectangle (3,-1) node[pos=.5, color=black,align=center]{Wafer 296\\ $d=\SI{30}{\micro\meter}$};
        \fill[rectangle,red!50] (0,-1.5) rectangle (1,-2.5) node[pos=.5,color=black,align=center] {a\\ \faLineChart};
        \fill[rectangle,red!50] (1.5,-1.5) rectangle (2.5,-2.5) node[pos=.5,color=black,align=center] {b\\ \faLineChart};
        \fill[rectangle,red!50] (3,-1.5) rectangle (7.5,-2.5) node[pos=.5,color=black,align=center] {c, d, e, f, g, h, i, j, k, l};
        \fill[rectangle,red!50] (0,-3) rectangle (3,-4.5) node[pos=.5,color=black,align=center] {c\\$t_\mathrm{immerse}=\SI{6,5}{\minute}$\\\ \faLineChart\hfill\faBinoculars};
        \fill[rectangle,red!50] (3.5,-3) rectangle (6.5,-4.5) node[pos=.5,color=black,align=center] {d\\$t_\mathrm{immerse}=\SI{13}{\minute}$\\ \faLineChart\hfill\faBinoculars};
        \fill[rectangle,red!50] (7,-3) rectangle (10,-4.5) node[pos=.5,color=black,align=center] {e\\$t_\mathrm{float}=\SI{13}{\minute}$\\ \faLineChart\hfill\faBinoculars};
        \fill[rectangle,red!50] (10.5,-3) rectangle (13.5,-4.5) node[pos=.5,color=black,align=center] {f\\ $t_\mathrm{float}=\SI{26}{\minute}$\\ \faLineChart\hfill\faBinoculars};
        \begin{pgfonlayer}{bg}
            \draw (1.5,-1)--(1.5,-1.25)--(5.25,-1.25)--(5.25,-1.5);
            \draw (2,-1.5)--(2,-1.25);
            \draw (1.5,-1.25)--(0.5,-1.25)--(0.5,-1.5);
            \draw (5.25,-2.5)--(5.25,-2.75)--(11.75,-2.75)--(11.75,-3);
            \draw (5.25,-2.75)--(1.5,-2.75)--(1.5,-3);
            \draw (5,-2.75)--(5,-3);
            \draw (8.5,-2.75)--(8.5,-3);
        \end{pgfonlayer}
    \end{tikzpicture}
    \caption{Wafer 296 processing scheme. While a \faLineChart\space signifies a recorded isotherm, the \faBinoculars\space means MEB pictures have been taken. Red marks pores closed on one end, green pores open on both ends. The processed wafers are immersed in phosphoric acid for $t_\mathrm{immerse}$ or floated on for $t_\mathrm{float}$.}
    \label{fig:wafer-296}
\end{figure}

\end{document}
