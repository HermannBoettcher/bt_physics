\documentclass[../../thesis.tex]{subfiles}

\begin{document}
\begin{figure}[ht]
    \centering
    \pgfdeclarelayer{bg}    % declare background layer
    \pgfsetlayers{bg,main}  % set the order of the layers (main is the standard layer)
    \tikzsetnextfilename{wafer_295_processing_plan}
    \begin{tikzpicture}
        \fill[rectangle,yellow!50] (0,0) rectangle (3,-1) node[pos=.5, color=black,align=center]{Wafer 295\\ $d=\SI{30}{\micro\meter}$};
        \fill[rectangle,red!50] (0,-1.5) rectangle (1,-2.5) node[pos=.5,color=black,align=center] {a\\ \faLineChart};
        \fill[rectangle,red!50] (1.5,-1.5) rectangle (2.5,-2.5) node[pos=.5,color=black,align=center] {b\\ \faLineChart};
        \fill[rectangle,red!50] (3,-1.5) rectangle (7.5,-2.5) node[pos=.5,color=black,align=center] {c, d, e, f, g, h, i, j, k, l};
        \fill[rectangle,green!50] (0,-3) rectangle (1.5,-4) node[pos=.5,color=black,align=center] {b\\ \faLineChart};
        \fill[rectangle,green!50] (2,-3) rectangle (3.5,-4) node[pos=.5,color=black,align=center] {e\\ \faLineChart};
        \fill[rectangle,green!50] (4,-3) rectangle (5.5,-4) node[pos=.5,color=black,align=center] {f\\ \faLineChart};
        \fill[rectangle,green!50] (6,-3) rectangle (7.5,-4) node[pos=.5,color=black,align=center] {d\\ \faLineChart\space\space\hfill\faBinoculars};
        \fill[rectangle,green!50] (8,-3) rectangle (9.5,-4) node[pos=.5,color=black,align=center] {g\\ \faLineChart\space\space\hfill\faBinoculars};
        \fill[rectangle,green!50] (10,-3) rectangle (11.5,-4) node[pos=.5,color=black,align=center] {c\\ \faLineChart};
        \fill[rectangle,green!50] (12,-3) rectangle (14,-4) node[pos=.5,color=black,align=center] {h, i, j, k, l};
        \fill[rectangle,blue!20] (2,-4.5) rectangle (3.5,-6) node[pos=.5,color=black,align=center] {e\\ 100 ALD\\ \faLineChart\hfill\faBinoculars};
        \fill[rectangle,blue!20] (2,-6.5) rectangle (3.5,-8) node[pos=.5,color=black,align=center] {e\\ 200 ALD\\ \faLineChart};
        \fill[rectangle,blue!20] (4,-6.5) rectangle (5.5,-8) node[pos=.5,color=black,align=center] {f\\ 200 ALD\\ \faLineChart\hfill\faBinoculars};
        \fill[rectangle,blue!20] (6,-8.5) rectangle (7.5,-10) node[pos=.5,color=black,align=center] {d\\ 250 ALD\\ \faLineChart\hfill\faBinoculars};
        \begin{pgfonlayer}{bg}
            \draw (1.5,-1)--(1.5,-1.25)--(5.25,-1.25)--(5.25,-1.5);
            \draw (1.5,-1.25)--(0.5,-1.25)--(0.5,-1.5);
            \draw (2,-1.25)--(2,-1.5);
            \draw (2,-2.5)--(2,-2.75)--(.75,-2.75)--(.75,-3);
            \draw (5.25,-2.5)--(5.25,-2.75)--(13,-2.75)--(13,-3);
            \draw (5.25,-2.75)--(3,-2.75);
            \draw (10.75,-3)--(10.75,-2.75);
            \draw (8.75,-2.75)--(8.75,-3);
            \draw (3.75,-2.75)--(2.75,-2.75)--(2.75,-3);
            \draw (4.75,-2.75)--(4.75,-3);
            \draw (4.75,-3.5)--(4.75,-6.5);
            \draw (2.75,-4)--(2.75,-6.5);
            \draw (6.75,-4)--(6.75,-8.5);
        \end{pgfonlayer}
    \end{tikzpicture}
    \caption{Wafer 295 processing scheme. While a \faLineChart\space signifies a recorded isotherm, the \faBinoculars\space means MEB pictures have been taken. Red marks pores closed on one end, green pores open on both ends. The blue marked membranes have undergone $n$ cycles of ALD depositing.}
    \label{fig:wafer_295}
\end{figure}
\end{document}
